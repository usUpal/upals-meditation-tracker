<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meditation Tracker</title>
    <style>
      :root {
        color-scheme: light dark;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        margin: 0;
        padding: 0;
        background: #f2f5f9;
        color: #1f2933;
      }
      .page {
        max-width: 960px;
        margin: 0 auto;
        padding: 32px 16px 48px;
      }
      h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
      }
      .subtitle {
        color: #52606d;
        margin-bottom: 2rem;
      }
      .card {
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 20px 45px rgba(15, 23, 42, 0.08);
        padding: 24px;
        margin-bottom: 24px;
      }
      .timer-display {
        font-size: 3rem;
        font-weight: 600;
        letter-spacing: 0.1em;
        text-align: center;
        margin: 16px 0 24px;
      }
      .button-row {
        display: flex;
        gap: 12px;
        justify-content: center;
        flex-wrap: wrap;
      }
      button {
        cursor: pointer;
        border: none;
        border-radius: 999px;
        padding: 12px 20px;
        font-size: 1rem;
        font-weight: 600;
        transition: transform 0.1s ease, box-shadow 0.2s ease;
      }
      button:disabled {
        cursor: not-allowed;
        opacity: 0.5;
        box-shadow: none;
      }
      #start-button {
        background: linear-gradient(135deg, #1d976c, #93f9b9);
        color: #0f172a;
      }
      #pause-button {
        background: linear-gradient(135deg, #f7971e, #ffd200);
        color: #0f172a;
      }
      #finish-button {
        background: linear-gradient(135deg, #ff5858, #f857a6);
        color: #0f172a;
      }
      button:not(:disabled):hover {
        transform: translateY(-1px);
        box-shadow: 0 8px 20px rgba(45, 55, 72, 0.2);
      }
      .mode-toggle {
        display: flex;
        gap: 12px;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 16px;
      }
      .mode-button {
        background: rgba(15, 23, 42, 0.06);
        color: #1f2933;
        border: 1px solid rgba(148, 163, 184, 0.4);
        border-radius: 999px;
        padding: 10px 18px;
        font-size: 0.95rem;
      }
      .mode-button.active {
        background: linear-gradient(135deg, #60a5fa, #2563eb);
        color: #f8fafc;
        border-color: transparent;
        box-shadow: 0 8px 20px rgba(37, 99, 235, 0.25);
      }
      .mode-button:not(:disabled):hover {
        box-shadow: 0 6px 16px rgba(37, 99, 235, 0.25);
      }
      .timer-config {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        margin-bottom: 16px;
      }
      .timer-config.hidden {
        display: none;
      }
      .timer-config.disabled {
        opacity: 0.6;
      }
      .timer-config label {
        font-weight: 600;
        color: #52606d;
      }
      .timer-config-row {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .timer-presets {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .timer-preset-button {
        background: rgba(99, 102, 241, 0.12);
        color: #3730a3;
        border-radius: 999px;
        padding: 8px 16px;
        border: 1px solid rgba(99, 102, 241, 0.3);
        font-weight: 600;
        transition: transform 0.08s ease, box-shadow 0.15s ease;
      }
      .timer-preset-button:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 16px rgba(99, 102, 241, 0.2);
      }
      .timer-preset-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        box-shadow: none;
      }
      .timer-input-group {
        display: flex;
        align-items: center;
        gap: 8px;
        background: #ffffff;
        border: 1px solid #cbd5e1;
        border-radius: 12px;
        padding: 8px 12px;
        box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.05);
      }
      .timer-input-group input {
        width: 64px;
        border: none;
        outline: none;
        font-size: 1rem;
        text-align: right;
        background: transparent;
      }
      .timer-input-group span {
        font-size: 0.9rem;
        color: #52606d;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 16px;
      }
      .stat-card {
        background: #f9fbff;
        border-radius: 12px;
        padding: 16px;
        border: 1px solid rgba(148, 163, 184, 0.3);
      }
      .goal-card {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .progress-wrapper {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .progress-track {
        flex: 1;
        height: 12px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.08);
        overflow: hidden;
      }
      .progress-fill {
        height: 100%;
        width: 0%;
        background: linear-gradient(135deg, #38bdf8, #1d4ed8);
        transition: width 0.3s ease;
      }
      .progress-text {
        font-weight: 600;
        min-width: 48px;
        text-align: right;
      }
      .goal-form {
        display: flex;
        flex-direction: column;
        gap: 8px;
        font-size: 0.95rem;
      }
      .goal-input-row {
        display: flex;
        gap: 8px;
      }
      .goal-input-row input {
        flex: 1;
        border: 1px solid #cbd5e1;
        border-radius: 10px;
        padding: 10px 12px;
        font-size: 1rem;
      }
      .goal-input-row input:focus {
        outline: 2px solid rgba(59, 130, 246, 0.4);
        border-color: #3b82f6;
      }
      .goal-save-button {
        background: linear-gradient(135deg, #60a5fa, #2563eb);
        color: #f8fafc;
        border: none;
        border-radius: 999px;
        padding: 10px 18px;
        font-size: 0.95rem;
        font-weight: 600;
        cursor: pointer;
        white-space: nowrap;
      }
      .goal-save-button:hover {
        transform: translateY(-1px);
        box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
      }
      .goal-save-button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        box-shadow: none;
      }
      .stat-label {
        color: #52606d;
        font-size: 0.95rem;
        margin-bottom: 6px;
      }
      .stat-value {
        font-size: 1.5rem;
        font-weight: 600;
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      thead {
        background: #f1f5f9;
      }
      th,
      td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #e2e8f0;
      }
      tbody tr:hover {
        background: #f8fafc;
      }
      .delete-button {
        background: transparent;
        border: 1px solid #e11d48;
        color: #e11d48;
        border-radius: 8px;
        padding: 6px 12px;
        font-size: 0.9rem;
      }
      @media (max-width: 600px) {
        .timer-display {
          font-size: 2.2rem;
        }
        button {
          width: 100%;
        }
        .mode-toggle {
          justify-content: center;
        }
        .timer-config-row {
          justify-content: center;
        }
        .progress-wrapper {
          flex-direction: column;
          align-items: flex-start;
        }
        .progress-text {
          text-align: left;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <header>
        <h1>Upal's Meditation Tracker</h1>
        <p class="subtitle">
          Track your sessions, reflect on your consistency, and celebrate your progress.
        </p>
      </header>

      <section class="card">
        <h2>Timer</h2>
        <div class="mode-toggle" role="tablist" aria-label="Session mode">
          <button
            type="button"
            id="mode-stopwatch"
            class="mode-button active"
            aria-pressed="true"
          >
            Stopwatch
          </button>
          <button
            type="button"
            id="mode-timer"
            class="mode-button"
            aria-pressed="false"
          >
            Countdown Timer
          </button>
        </div>
        <div
          id="timer-config"
          class="timer-config hidden"
          aria-live="polite"
          aria-hidden="true"
        >
          <label for="timer-minutes">Timer duration</label>
          <div class="timer-config-row">
            <div class="timer-input-group">
              <input
                type="number"
                id="timer-minutes"
                min="0"
                max="999"
                inputmode="numeric"
                value="5"
              />
              <span>min</span>
            </div>
            <div class="timer-input-group">
              <input
                type="number"
                id="timer-seconds"
                min="0"
                max="59"
                inputmode="numeric"
                value="0"
              />
              <span>sec</span>
            </div>
          </div>
          <div class="timer-presets" role="group" aria-label="Timer presets">
            <button
              type="button"
              class="timer-preset-button"
              data-timer-preset="120"
            >
              2 min
            </button>
            <button
              type="button"
              class="timer-preset-button"
              data-timer-preset="300"
            >
              5 min
            </button>
            <button
              type="button"
              class="timer-preset-button"
              data-timer-preset="600"
            >
              10 min
            </button>
          </div>
        </div>
        <div id="timer-display" class="timer-display">00:00:00</div>
        <div class="button-row">
          <button type="button" id="start-button">Start / Resume</button>
          <button type="button" id="pause-button" disabled>Pause</button>
          <button type="button" id="finish-button" disabled>Finish</button>
        </div>
      </section>

      <section class="card">
        <h2>Your Stats</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">This Week</div>
            <div id="weekly-total" class="stat-value">00:00:00</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">This Month</div>
            <div id="monthly-total" class="stat-value">00:00:00</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">This Year</div>
            <div id="yearly-total" class="stat-value">00:00:00</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">All Time Total</div>
            <div id="total-time" class="stat-value">00:00:00</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Total Sessions</div>
            <div id="total-sessions" class="stat-value">0</div>
          </div>
          <div class="stat-card goal-card">
            <div class="stat-label">Weekly Target</div>
            <div id="weekly-target" class="stat-value">00:00:00</div>
            <div class="progress-wrapper">
              <div class="progress-track">
                <div id="weekly-progress-bar" class="progress-fill"></div>
              </div>
              <div id="weekly-progress-text" class="progress-text">0%</div>
            </div>
            <form id="weekly-goal-form" class="goal-form">
              <label for="weekly-goal-input">Update target (minutes)</label>
              <div class="goal-input-row">
                <input
                  type="number"
                  id="weekly-goal-input"
                  min="1"
                  step="1"
                  placeholder="e.g. 300"
                />
                <button type="submit" class="goal-save-button">Save</button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Session History</h2>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Start</th>
                <th>End</th>
                <th>Duration</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="sessions-table-body"></tbody>
          </table>
        </div>
      </section>
    </div>

    <script src="/static/app.js" defer></script>
  </body>
</html>
